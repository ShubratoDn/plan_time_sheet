<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <!-- App favicon -->
        <link rel="shortcut icon" th:href="@{/assets/images/favicon.ico}">
        <!-- App title -->
        <title>Profile</title>

        <!-- Bootstrap Css -->
        <link th:href="@{/assets_new/css/bootstrap.min.css}" id="bootstrap-style" rel="stylesheet" type="text/css" />
        <!-- Icons Css -->
        <link th:href="@{/assets_new/css/icons.min.css}" rel="stylesheet" type="text/css" />
        <!-- App Css-->
        <link th:href="@{/assets_new/css/app.min.css}" id="app-style" rel="stylesheet" type="text/css" />
         <link rel="stylesheet" th:href="@{/assets_new/libs/summernote/summernote-bs4.min.css}" />
        
     
	
		
    </head>
    <body data-sidebar="dark" class="sidebar-enable vertical-collpsed">
		<div id="layout-wrapper">
			<th:block th:replace="new/user/header :: header"></th:block>
            <div class="vertical-menu">

                <div data-simplebar class="h-100" th:if="${session.user.role == 'ROLE_SUPERVISOR'}">
					
					<th:block th:replace="new/supervisor/menu :: menu"></th:block>
					
                </div>
                <div data-simplebar class="h-100" th:if="${session.user.role == 'ROLE_ADMIN'}">
					
					<th:block th:replace="new/admin/menu :: menu"></th:block>
					
                </div>
                <div data-simplebar class="h-100" th:if="${session.user.role == 'ROLE_USER'}">
					<th:block th:replace="new/user/menu :: menu"></th:block>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="main-content">
        		<div class="page-content">
            		<div class="container-fluid">
						<div class="row">
							<div class="col-12">
								<div class="page-title-box d-flex align-items-center justify-content-between">
									<h4 class="mb-0 font-size-18">Profile</h4>
									
								</div>
							</div>
						</div>
						<div class="col-xs-12">
	                      	<div class="alert alert-danger alert-dismissible fade in" role="alert" th:if="${error}">
		                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
		                            <span aria-hidden="true">×</span>
		                        </button>
	                        	<strong>Oh snap!</strong> <th:block th:text="${error}"></th:block>
	                   		</div>
		                    <div class="alert alert-success alert-dismissible fade in" role="alert" th:if="${success}">
		                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
		                            <span aria-hidden="true">×</span>
		                        </button>
		                        <strong>Success</strong> <th:block th:text="${success}"></th:block>
		                    </div>
	                     </div>
						<div class="row">
                        
                        	
                        	
                        	
                         	<div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
	                            <div class="card link-card">
	                                <a class="card-body" href="javascript:void(0);" data-toggle="modal" data-target="#private-signature">
	                                    <div class="media">
                                            <div class="mini-stat-icon avatar-sm rounded-circle bg-primary align-self-center">
                                                <span class="avatar-title rounded-circle">
                                                    <i class="bx bx-brush font-size-24"></i>
                                                </span>
                                            </div>
                                            <div class="media-body text-center">
                                                <h5 class="text-muted font-weight-medium">Private signature</h5>
                                                <p class="m-0">Private signature</p>
                                            </div>
                                        </div>
	                                </a>
	                            </div>
                         	</div>
                         	
                         	
                         	<div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
	                            <div class="card link-card">
	                                <a class="card-body" href="javascript:void(0);" data-toggle="modal" data-target="#change-password">
	                                    <div class="media">
                                            <div class="mini-stat-icon avatar-sm rounded-circle bg-primary align-self-center">
                                                <span class="avatar-title rounded-circle">
                                                    <i class="bx bx-brush font-size-24"></i>
                                                </span>
                                            </div>
                                            <div class="media-body text-center">
                                                <h5 class="text-muted font-weight-medium">Change Password</h5>
                                                <p class="m-0">Change Password</p>
                                            </div>
                                        </div>
	                                </a>
	                            </div>
                         	</div>
                         	
                    	</div>
					</div> <!-- container-fluid -->
            	</div>
            </div>
       	</div>
       	
       	<div id="private-signature" class="modal fade bs-example-modal-lg"
			tabindex="-1" role="dialog"
			aria-labelledby="private-signatureLabel" aria-hidden="true"
			style="display: none;">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title mt-0">Private signature</h5>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					</div>
					<div class="modal-body">
						<form id="form" th:action="@{/user/private-signature}" method="post" class="needs-validation">
							<div class="summernote" th:text="${userLogin.privateSign}"></div> 
							<textarea name="privateSignature" id="description" style="display: none;" required th:value="${userLogin.privateSign}"></textarea>
							<button class="btn btn-primary waves-effect waves-light mt-2" type="submit">
                                Save
                            </button>
						</form>
					</div>
				</div>
			</div>
		</div>
		
		<div id="change-password" class="modal fade bs-example-modal-lg"
			tabindex="-1" role="dialog"
			aria-labelledby="change-passwordLabel" aria-hidden="true"
			style="display: none;">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title mt-0">Change Password</h5>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					</div>
					<div class="modal-body p-0">
						  <div class="card overflow-hidden col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-0">
		                            <div class="card-body"> 
		                                <div>
		                                    <form class="form-horizontal needs-validation" data-parsley-validate="" id="loginform" method="post" novalidate="" action="/profile/change-pass">
						                        <div class="row"> 
							                        <div class="form-group col-sm-12 col-md-12 col-lg-12 col-xl-12">
							                            <input class="form-control" name="currentPassword" placeholder="Current Password" required="required" type="password"> 
							                        </div>
							                        <div class="form-group col-sm-12 col-md-12 col-lg-12 col-xl-12">
							                            <input class="form-control" name="password" placeholder="New Password" required="required" type="password"> 
							                        </div>
							                        <div class="form-group col-sm-12 col-md-12 col-lg-12 col-xl-12">
							                            <input class="form-control" name="confPass" placeholder="Confrim New Password" required="required" type="password"> 
							                        </div>
						                        </div>
						                        <div class="form-group text-center">
						                           	<button class="btn btn-danger waves-effect waves-light" onclick="window.history.go(-1);" type="button">Cancel</button>
						                           	<button class="btn btn-primary waves-effect waves-light" type="submit">Change Password</button>
						                        </div>
						                    </form>
		                                </div>
		            
		                            </div>
		                        </div>
					</div>
				</div>
			</div>
		</div>
        <!-- jQuery  -->
        <script th:src="@{/assets_new/libs/jquery/jquery.min.js}"></script>
        <script th:src="@{/assets_new/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
        <script th:src="@{/assets_new/libs/metismenu/metisMenu.min.js}"></script>
        <script th:src="@{/assets_new/libs/simplebar/simplebar.min.js}"></script>
        <script th:src="@{/assets_new/libs/node-waves/waves.min.js}"></script>
        <script th:src="@{/assets_new/libs/parsleyjs/parsley.min.js}"></script>
        <script th:src="@{/assets_new/js/pages/form-validation.init.js}"></script>
        <script th:src="@{/assets_new/libs/summernote/summernote-bs4.min.js}"></script>
        <script th:src="@{/assets_new/js/app.js}"></script>
		<script th:src="@{/assets_new/libs/summernote/summernote-bs4.min.js}"></script>
		<script th:src="@{/assets/js/fstdropdown.js}"></script>
        <script th:src="@{/assets_new/js/app.js}"></script>
   <script>
		$(document).ready(function() {
			$(".summernote").summernote({
				toolbar: [
				    // [groupName, [list of button]]
				    ['style', ['bold', 'italic', 'underline', 'clear']],
				    ['font', ['strikethrough', 'superscript', 'subscript']],
				    ['fontsize', ['fontsize']],
				    ['color', ['color']],
				    ['para', ['ul', 'ol', 'paragraph']],
				    ['table', ['table']],
				    ['insert', ['link']],
				    
				  ],
				minHeight:200,maxHeight:500});
			$(".summernote").on("summernote.change", function (e) {   // callback as jquery custom event 
				$("#description").val($('.summernote').summernote('code'));
		 	});

		 	$("#form").submit(function (e){
		 		e.preventDefault();
		 		$.ajax({
				    type : "POST",
				    url : $(this).attr('action'),
				    data: new FormData(this),
				    cache: false,
			        contentType: false,
			        processData: false,
				    success: function(data) {
						
				    	location.reload();
				    },error: function(XMLHttpRequest, textStatus, errorThrown) {
				    }
		 		});
			 });
		});
		</script>
    </body>
</html>